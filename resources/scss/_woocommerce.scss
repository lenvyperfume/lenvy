@use 'variables' as v;

// ─── WooCommerce notices ───────────────────────────────────────────────────────
// WC outputs notices with these classes. Colours use direct hex values since
// error/success/info are semantic states, not brand design tokens.

.woocommerce-notices-wrapper {
  margin-bottom: 1.5rem;
}

.woocommerce-message,
.woocommerce-error,
.woocommerce-info {
  display: flex;
  align-items: flex-start;
  gap: 0.75rem;
  border: 1px solid;
  padding: 0.75rem 1rem;
  font-size: 0.875rem;
  line-height: 1.6;
  list-style: none;
  margin: 0 0 1rem;

  // WC wraps errors in a <ul> — reset list defaults
  li {
    list-style: none;
  }

  a.button,
  .button {
    margin-left: auto;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    white-space: nowrap;
    padding: 0.5rem 1rem;
    border: 1px solid currentColor;
    transition:
      background-color 200ms ease,
      color 200ms ease;
  }
}

.woocommerce-message {
  background-color: #f0fdf4;
  border-color: #bbf7d0;
  color: #14532d;

  a.button:hover {
    background-color: #14532d;
    color: #fff;
  }
}

.woocommerce-error {
  background-color: #fff1f2;
  border-color: #fecdd3;
  color: #881337;
  flex-direction: column;
  gap: 0.25rem;

  a.button:hover {
    background-color: #881337;
    color: #fff;
  }
}

.woocommerce-info {
  background-color: v.$neutral-50;
  border-color: v.$neutral-200;
  color: v.$neutral-800;

  a.button:hover {
    background-color: v.$neutral-900;
    color: #fff;
  }
}

// ─── WooCommerce form fields ───────────────────────────────────────────────────
// Normalise WC's native form elements to match the theme's minimal aesthetic.

.woocommerce {
  input[type='text'],
  input[type='email'],
  input[type='tel'],
  input[type='password'],
  input[type='number'],
  input[type='search'],
  textarea,
  select {
    width: 100%;
    height: 2.75rem; // 44px
    padding: 0 0.875rem;
    border: 1px solid v.$neutral-200;
    background-color: v.$color-white;
    color: v.$neutral-900;
    font-family: v.$font-sans;
    font-size: 0.875rem;
    line-height: 1.5;
    border-radius: 0;
    appearance: none;
    transition: border-color 200ms ease;

    &:focus {
      outline: none;
      border-color: v.$neutral-900;
    }

    &::placeholder {
      color: v.$neutral-400;
    }
  }

  textarea {
    height: auto;
    padding: 0.625rem 0.875rem;
    min-height: 6rem;
  }

  select {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23999' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.875rem center;
    padding-right: 2.5rem;
  }

  // Quantity input — used in cart and product pages
  input.qty {
    width: 3.5rem;
    text-align: center;
    padding-inline: 0.5rem;
  }

  // Two-column field rows (WC uses .form-row-first / .form-row-last).
  .woocommerce-checkout .form-row-first,
  .woocommerce-checkout .form-row-last {
    float: none;
    width: 100%;
  }

  .woocommerce-checkout #customer_details .woocommerce-billing-fields__field-wrapper,
  .woocommerce-checkout #customer_details .woocommerce-shipping-fields__field-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.125rem 0.75rem;

    .form-row-wide {
      grid-column: 1 / -1;
    }

    .form-row-first,
    .form-row-last {
      grid-column: auto;
    }

    @media (max-width: 639px) {
      grid-template-columns: 1fr;

      .form-row-first,
      .form-row-last {
        grid-column: 1 / -1;
      }
    }
  }

  // WC login notice at checkout top.
  .woocommerce-form-login-toggle {
    margin-bottom: 1.5rem;
  }
}

// ─── WooCommerce rating stars ─────────────────────────────────────────────────

.woocommerce-product-rating {
  display: flex;
  align-items: center;
  gap: 0.375rem;
  font-size: 0.75rem;
  color: v.$neutral-500;
}

.star-rating {
  display: inline-flex;
  gap: 1px;
  color: v.$color-black;

  span::before {
    // WC uses :before pseudo-element with font icons — override with CSS only
    // when WC's star font is not loaded.
    content: '★';
    font-size: 0.875rem;
    line-height: 1;
  }
}

// ─── Single product — gallery ─────────────────────────────────────────────────

.lenvy-gallery-dot {
  width: 0.5rem;
  height: 0.5rem;
  border-radius: 50%;
  background-color: v.$neutral-300;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: background-color v.$transition-base;

  &.is-active {
    background-color: v.$color-primary;
  }
}

// ─── Single product — add to cart form ────────────────────────────────────────

.lenvy-atc-form {
  // Quantity + button on the same row.
  .quantity {
    display: inline-flex;
    align-items: center;
    border: 1px solid v.$neutral-300;
    gap: 0;

    input.qty {
      width: 3rem;
      border: none;
      text-align: center;
      font-size: 0.875rem;
      padding: 0.625rem 0.25rem;

      &:focus {
        outline: none;
      }
    }
  }

  form.cart {
    display: flex;
    align-items: stretch;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  // Add-to-cart button — full-width primary CTA.
  button.single_add_to_cart_button {
    flex: 1;
    min-width: 0;
    height: 3.5rem; // h-14
    padding-inline: 2rem;
    background-color: v.$color-primary;
    color: v.$color-black;
    font-size: 0.6875rem; // 11px
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    border: none;
    cursor: pointer;
    transition:
      background-color 200ms ease,
      color 200ms ease;

    &:hover {
      background-color: v.$color-primary-hover;
      color: v.$color-black;
    }
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    &.loading {
      opacity: 0.7;
      pointer-events: none;
    }
  }

  // Variable product — the form is flex, so children that should be
  // full-width (tiles, variation wrap) need to break out of the row.
  form.variations_form {
    display: flex;
    align-items: stretch;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  // Variable product — hide original table (kept in DOM for WC JS).
  table.variations {
    display: none;
  }

  // Full-width sections inside the flex form.
  .lenvy-variation-attribute,
  .single_variation_wrap,
  .reset_variations_alert {
    width: 100%;
  }

  // Visually-hidden wrapper for the select WC JS reads.
  .lenvy-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  // Attribute label above the tiles.
  .lenvy-variation-label {
    display: block;
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: v.$neutral-500;
    margin-bottom: 0.5rem;
  }

  // Tile grid.
  .lenvy-variation-tiles {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  // Individual tile.
  .lenvy-variation-tile {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-width: 5.5rem;
    padding: 0.625rem 1rem;
    border: 1px solid v.$neutral-200;
    background-color: v.$color-white;
    cursor: pointer;
    transition:
      border-color v.$transition-base,
      background-color v.$transition-base;

    &:hover:not(.is-oos) {
      border-color: v.$neutral-400;
    }

    // Active state — selected tile.
    &.is-active {
      border-color: v.$color-black;
      background-color: v.$neutral-50;
    }

    // Out of stock.
    &.is-oos {
      opacity: 0.4;
      cursor: not-allowed;
      position: relative;
    }

    &__label {
      font-size: 0.8125rem;
      font-weight: 500;
      color: v.$neutral-900;
      line-height: 1.2;
    }

    &__price {
      font-size: 0.75rem;
      color: v.$neutral-500;
      margin-top: 0.125rem;
    }

    &__oos {
      font-size: 0.625rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: v.$neutral-400;
      margin-top: 0.125rem;
    }
  }

  // Reset link — hidden by default, WC shows it when a selection is made.
  .reset_variations {
    font-size: 0.75rem;
    color: v.$neutral-500;
    text-decoration: underline;
    text-underline-offset: 2px;
    display: none;
    margin-top: 0.5rem;

    &:hover {
      color: v.$color-black;
    }
  }

  // Hide WC's own variation price — we show it in the main price area.
  .woocommerce-variation-price {
    display: none;
  }

  // Stock status.
  .stock {
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;

    &.in-stock {
      color: #15803d;
    }
    &.out-of-stock {
      color: v.$neutral-500;
    }
  }
}

// ─── Single product — meta (legacy, kept for compat) ─────────────────────────

.lenvy-product-meta {
  font-size: 0.75rem;
  color: v.$neutral-500;
  line-height: 1.8;

  a {
    color: v.$neutral-600;
    text-decoration: underline;
    text-underline-offset: 2px;

    &:hover {
      color: v.$color-black;
    }
  }
}

// ─── Single product — tabs (removed; accordions used instead) ────────────────
// Kept as a minimal fallback in case any plugin injects tabs.

// ─── Single product — reviews ─────────────────────────────────────────────────

#reviews {
  .woocommerce-Reviews-title {
    display: none;
  }

  .comment-form-rating {
    label {
      font-size: 0.75rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: v.$neutral-600;
    }

    .stars a {
      font-size: 1.25rem;
      color: v.$neutral-300;
      text-decoration: none;

      &:hover,
      &.active {
        color: v.$color-black;
      }
    }
  }
}

// ─── Cart & checkout buttons ──────────────────────────────────────────────────
// Use `body` prefix to beat WooCommerce's own woocommerce.css specificity.
// WC marks primary actions with .alt (Place Order, Proceed to Checkout).
// Secondary actions (Update Cart, Apply Coupon) get an outlined style.

// Shared base reset — applied to every WC button.
body .woocommerce a.button,
body .woocommerce button.button,
body .woocommerce input.button,
body .woocommerce-page a.button,
body .woocommerce-page button.button,
body .woocommerce-page input.button {
  display: inline-block;
  padding: 0.75rem 1.5rem;
  font-family: v.$font-sans;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  line-height: 1;
  text-decoration: none;
  border-radius: 0;
  cursor: pointer;
  transition:
    background-color 200ms ease,
    color 200ms ease,
    border-color 200ms ease;

  // Secondary default: outlined black.
  background-color: transparent;
  color: v.$color-black;
  border: 1px solid v.$color-black;

  &:hover {
    background-color: v.$color-black;
    color: v.$color-white;
    border-color: v.$color-black;
  }

  &:disabled,
  &.disabled {
    opacity: 0.4;
    cursor: not-allowed;
  }
}

// Primary: .alt class — Place Order, Proceed to Checkout, and other WC primaries.
body .woocommerce a.button.alt,
body .woocommerce button.button.alt,
body .woocommerce input.button.alt,
body .woocommerce-page a.button.alt,
body .woocommerce-page button.button.alt,
body .woocommerce-page input.button.alt,
body .woocommerce .wc-proceed-to-checkout a.checkout-button,
body .woocommerce-page .wc-proceed-to-checkout a.checkout-button {
  background-color: v.$color-primary;
  color: v.$color-black;
  border-color: transparent;
  padding: 1rem 1.5rem;

  &:hover {
    background-color: v.$color-primary-hover;
    color: v.$color-black;
    border-color: transparent;
  }
}

// Proceed to checkout — full width.
body .woocommerce .wc-proceed-to-checkout a.checkout-button,
body .woocommerce-page .wc-proceed-to-checkout a.checkout-button {
  display: block;
  width: 100%;
  text-align: center;
}

// Place order — full width.
body .woocommerce #place_order,
body .woocommerce-page #place_order {
  display: block;
  width: 100%;
  text-align: center;
}

// ─── WooCommerce Blocks buttons ───────────────────────────────────────────────
// Block cart/checkout uses wc-block-components-button + wp-element-button
// instead of the classic .button class.

// Base reset for all block buttons.
body .wc-block-components-button,
body .wp-element-button {
  border-radius: 0;
  font-family: v.$font-sans;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  line-height: 1;
  padding: 0.875rem 1.5rem;
  cursor: pointer;
  text-decoration: none;
  transition:
    background-color 200ms ease,
    color 200ms ease,
    border-color 200ms ease;

  // Default: outlined secondary style.
  background-color: transparent;
  color: v.$color-black;
  border: 1px solid v.$color-black;

  &:hover {
    background-color: v.$color-black;
    color: v.$color-white;
  }

  .wc-block-components-button__text {
    color: inherit;
    font-size: inherit;
    font-weight: inherit;
    text-transform: inherit;
    letter-spacing: inherit;
  }
}

// Primary: "Proceed to Checkout" and "Place Order" — .contained variant.
body .wc-block-components-button.contained,
body .wc-block-cart__submit-button,
body .wc-block-checkout__form-submit {
  background-color: v.$color-primary;
  color: v.$color-black;
  border: none;
  width: 100%;
  text-align: center;
  justify-content: center;

  &:hover {
    background-color: v.$color-primary-hover;
    color: v.$color-black;
  }

  .wc-block-components-button__text {
    color: v.$color-black;
  }
}

// ─── Single product price ─────────────────────────────────────────────────────
// WC wraps single product price in <p class="price"> with optional <del>/<ins>.

.lenvy-product-price {
  .price {
    font-weight: 500;
    color: v.$neutral-900;

    del {
      font-weight: 400;
      font-size: 0.875rem;
      color: v.$neutral-400;
      text-decoration: line-through;
      margin-right: 0.375rem;
    }

    ins {
      text-decoration: none;
      color: v.$neutral-900;
    }
  }
}

// ─── Product card price (WC price HTML: <del> + <ins> for sale pricing) ───────
// WC outputs: <del><span>€xx</span></del><ins><span>€yy</span></ins>
// Regular price: neutral-900, semibold. Sale: ins = neutral-900, del = neutral-400 small.

.lenvy-card-price {
  font-size: 0.8125rem; // 13px
  font-weight: 500;
  color: v.$neutral-800;

  del {
    font-weight: 400;
    font-size: 0.6875rem; // 11px
    color: v.$neutral-400;
    text-decoration: line-through;
    margin-right: 0.25rem;
  }

  ins {
    text-decoration: none;
    color: v.$neutral-600;
  }
}

// ─── Cart page: item row ─────────────────────────────────────────────────────

.lenvy-cart-row {
  // Remove button: hidden by default, shows on hover at top-right.
  .lenvy-cart-remove {
    position: absolute;
    top: 0.5rem;
    right: 0;
    width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.125rem;
    line-height: 1;
    color: v.$neutral-300;
    text-decoration: none;
    opacity: 0;
    transition:
      opacity 200ms ease,
      color 200ms ease;

    // Override WC default .remove red circle styles.
    &:hover {
      color: v.$neutral-900 !important;
      background: none !important;
    }
  }

  &:hover .lenvy-cart-remove {
    opacity: 1;
  }

  // On touch devices, always show.
  @media (hover: none) {
    .lenvy-cart-remove {
      opacity: 1;
    }
  }
}

// Override WC default .remove styling (red circle).
.woocommerce a.remove {
  color: v.$neutral-300 !important;
  font-weight: 300;

  &:hover {
    color: v.$neutral-900 !important;
    background: transparent !important;
  }
}

// ─── Cart page: item thumbnails ───────────────────────────────────────────────

.cart-item-thumb {
  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
  }

  a {
    display: block;
    width: 100%;
    height: 100%;
  }
}

// ─── Quantity stepper (global: cart + single product) ─────────────────────────

.lenvy-qty {
  display: inline-flex;
  align-items: center;
  border: 1px solid v.$neutral-200;

  input.qty {
    width: 2.5rem;
    height: 2rem;
    border: none;
    text-align: center;
    font-size: 0.8125rem;
    font-family: v.$font-sans;
    padding: 0;
    border-radius: 0;
    color: v.$neutral-900;
    -moz-appearance: textfield;

    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    &:focus {
      outline: none;
    }
  }
}

.lenvy-qty__btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  background: none;
  border: none;
  font-size: 0.875rem;
  color: v.$neutral-400;
  cursor: pointer;
  user-select: none;
  transition: color 200ms ease;
  padding: 0;
  line-height: 1;

  &:hover {
    color: v.$neutral-900;
  }
}

// Single product page: larger stepper.
.lenvy-atc-form .lenvy-qty {
  input.qty {
    width: 3rem;
    height: 3.5rem;
    font-size: 0.875rem;
  }

  .lenvy-qty__btn {
    width: 2.5rem;
    height: 3.5rem;
    font-size: 1rem;
  }
}

// ─── Cart page: coupon & update button ───────────────────────────────────────

.lenvy-coupon-input {
  flex: 1;
  height: 2.25rem;
  padding: 0 0.625rem;
  border: 1px solid v.$neutral-200;
  font-family: v.$font-sans;
  font-size: 0.8125rem;
  color: v.$neutral-900;
  border-radius: 0;
  appearance: none;
  background-color: v.$color-white;
  transition: border-color 200ms ease;

  &:focus {
    outline: none;
    border-color: v.$color-black;
  }

  &::placeholder {
    color: v.$neutral-400;
  }
}

.lenvy-coupon-btn {
  height: 2.25rem;
  padding: 0 1rem;
  background-color: v.$color-black;
  color: v.$color-white;
  border: none;
  font-family: v.$font-sans;
  font-size: 0.6875rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
  white-space: nowrap;
  transition: opacity 200ms ease;

  &:hover {
    opacity: 0.8;
  }
}

.lenvy-update-btn {
  background: none;
  border: none;
  padding: 0;
  font-family: v.$font-sans;
  font-size: 0.75rem;
  color: v.$neutral-400;
  text-decoration: underline;
  text-underline-offset: 3px;
  cursor: pointer;
  transition: color 200ms ease;

  &:hover {
    color: v.$neutral-900;
  }
}

// ─── Cart totals (order summary sidebar) ─────────────────────────────────────

.cart_totals {
  background-color: v.$neutral-50;
  padding: 1.5rem;

  @media (min-width: 1024px) {
    padding: 2rem;
  }

  h2 {
    font-family: v.$font-sans;
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: v.$neutral-900;
    margin-bottom: 1.25rem;
    padding-bottom: 0;
    border-bottom: none;
  }

  // Legacy .shop_table fallback (kept for plugins that inject rows).
  .shop_table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1.5rem;

    tr {
      th,
      td {
        padding: 0.5rem 0;
        font-size: 0.875rem;
        vertical-align: top;
        border: none;
        border-bottom: 1px solid v.$neutral-200;
      }

      th {
        font-weight: 400;
        color: v.$neutral-500;
        padding-right: 1rem;
        text-align: left;
      }

      td {
        color: v.$neutral-900;
        text-align: right;
      }

      &.order-total {
        th,
        td {
          font-weight: 600;
          font-size: 1rem;
          padding-top: 0.875rem;
          padding-bottom: 0;
          border-bottom: none;
        }
      }

      &.cart-discount td {
        color: #15803d;
      }
    }
  }

  .shipping-calculator-button {
    font-size: 0.8125rem;
    color: v.$neutral-500;
    text-decoration: underline;
    text-underline-offset: 2px;
    cursor: pointer;

    &:hover {
      color: v.$color-black;
    }
  }
}

// ─── Cart summary rows (custom markup, no <table>) ──────────────────────────

.lenvy-cart-summary-rows {
  margin-bottom: 1.25rem;
}

.lenvy-summary-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 0.5rem 0;
  font-size: 0.875rem;
  color: v.$neutral-500;
  border-bottom: 1px solid v.$neutral-200;

  span:last-child {
    color: v.$neutral-900;
    text-align: right;
  }

  &.lenvy-summary-discount span:last-child {
    color: #15803d;
  }

  &.lenvy-summary-total {
    border-bottom: none;
    padding-top: 0.75rem;

    span {
      font-weight: 600;
      font-size: 1rem;
      color: v.$neutral-900;
    }
  }
}

// ─── Cart: coupon toggle in summary ──────────────────────────────────────────

.lenvy-coupon-toggle {
  border-top: 1px solid v.$neutral-200;
  margin-bottom: 1.25rem;
}

.lenvy-coupon-trigger {
  display: block;
  width: 100%;
  padding: 0.75rem 0;
  background: none;
  border: none;
  font-family: v.$font-sans;
  font-size: 0.8125rem;
  color: v.$neutral-500;
  text-align: left;
  text-decoration: underline;
  text-underline-offset: 3px;
  cursor: pointer;
  transition: color 200ms ease;

  &:hover {
    color: v.$neutral-900;
  }
}

.lenvy-coupon-form {
  padding-bottom: 0.75rem;
}

// ─── Cart: proceed to checkout button ────────────────────────────────────────

.lenvy-checkout-btn {
  display: block;
  width: 100%;
  height: 3rem;
  line-height: 3rem;
  text-align: center;
  background-color: v.$color-primary;
  color: v.$color-black;
  font-family: v.$font-sans;
  font-size: 0.6875rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  text-decoration: none;
  cursor: pointer;
  transition: background-color 200ms ease;

  &:hover {
    background-color: v.$color-primary-hover;
    color: v.$color-black;
  }
}

// ─── Checkout: summary panel ──────────────────────────────────────────────────

.lenvy-checkout-summary {
  background-color: v.$neutral-50;
  padding: 1.5rem;

  @media (min-width: 1024px) {
    padding: 2rem;
  }
}

.lenvy-checkout-summary__heading {
  font-family: v.$font-sans;
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: v.$neutral-900;
  margin-bottom: 1.25rem;
}

// ─── Checkout: review order items ────────────────────────────────────────────

.lenvy-review-items {
  margin-bottom: 1.25rem;
  border-bottom: 1px solid v.$neutral-200;
}

.lenvy-review-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.625rem 0;
  border-top: 1px solid v.$neutral-200;

  &:first-child {
    border-top: none;
  }
}

.lenvy-review-item__thumb {
  width: 3rem;
  height: 4rem;
  flex-shrink: 0;
  overflow: hidden;
  background-color: v.$color-white;

  img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
}

.lenvy-review-item__info {
  flex: 1;
  min-width: 0;
}

.lenvy-review-item__name {
  font-size: 0.8125rem;
  color: v.$neutral-800;
  line-height: 1.4;
}

.lenvy-review-item__qty {
  color: v.$neutral-400;
  font-weight: 400;
}

.lenvy-review-item__price {
  flex-shrink: 0;
  font-size: 0.8125rem;
  font-weight: 500;
  color: v.$neutral-900;
}

// ─── Checkout: review totals ─────────────────────────────────────────────────

.lenvy-review-totals {
  margin-bottom: 1.5rem;
}

.lenvy-review-totals__row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 0.5rem 0;
  font-size: 0.875rem;
  color: v.$neutral-500;
  border-bottom: 1px solid v.$neutral-200;

  span:last-child {
    color: v.$neutral-900;
  }

  &.lenvy-review-totals__discount span:last-child {
    color: #15803d;
  }

  &.lenvy-review-totals__total {
    border-bottom: none;
    padding-top: 0.75rem;

    span {
      font-weight: 600;
      font-size: 1rem;
      color: v.$neutral-900;
    }
  }
}

// ─── Checkout: payment gateways ───────────────────────────────────────────────

#payment {
  margin-top: 1.25rem;
  border-top: 1px solid v.$neutral-200;
  padding-top: 1.25rem;

  ul.payment_methods {
    list-style: none;
    margin: 0 0 1.25rem;
    padding: 0;

    li.wc_payment_method {
      padding: 0.625rem 0;
      border-bottom: 1px solid v.$neutral-200;

      &:last-child {
        border-bottom: none;
      }

      label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.8125rem;
        font-weight: 500;
        color: v.$neutral-900;
        cursor: pointer;
      }

      input[type='radio'] {
        accent-color: v.$color-black;
      }

      .payment_box {
        margin-top: 0.5rem;
        padding: 0.625rem;
        background-color: v.$color-white;
        font-size: 0.75rem;
        color: v.$neutral-500;
        line-height: 1.6;
      }
    }
  }

  // Place order button.
  .place-order {
    #place_order {
      display: block;
      width: 100%;
      height: 3rem;
      background-color: v.$color-primary;
      color: v.$color-black;
      font-family: v.$font-sans;
      font-size: 0.6875rem;
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      border: none;
      cursor: pointer;
      transition: background-color 200ms ease;

      &:hover {
        background-color: v.$color-primary-hover;
      }
    }
  }
}

// ─── Checkout: modern form fields (IFTA labels) ─────────────────────────────
// In-Field Top Aligned labels: the label sits inside the input at the top,
// always visible. Inputs use a subtle background tint that clears on focus,
// with a double-ring focus indicator (border + box-shadow).

.lenvy-checkout-fields {
  // Section wrappers
  .woocommerce-billing-fields,
  .woocommerce-shipping-fields,
  .woocommerce-additional-fields,
  .woocommerce-account-fields {
    &:not(:first-child) {
      margin-top: 2rem;
    }

    // Section headings — clean, no border
    h3 {
      font-family: v.$font-sans;
      font-size: 0.875rem;
      font-weight: 600;
      text-transform: none;
      letter-spacing: 0;
      color: v.$neutral-900;
      margin-bottom: 1.5rem;
      padding-bottom: 0;
      border-bottom: none;
    }
  }

  // ── IFTA label pattern ──────────────────────────────────────────────────────

  .form-row {
    position: relative;
    margin-bottom: 0;

    // IFTA label — only for rows that contain an input wrapper (text/select)
    &:has(.woocommerce-input-wrapper) > label {
      position: absolute;
      top: 0.4375rem;
      left: 0.875rem;
      right: 0.875rem;
      z-index: 1;
      display: block;
      font-size: 0.5625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      line-height: 1;
      color: v.$neutral-400;
      pointer-events: none;
      margin-bottom: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      transition: color 200ms ease;
    }

    // Focused: label darkens for visual feedback
    &:has(input:focus, select:focus, .select2-container--focus, .select2-container--open) > label {
      color: v.$neutral-600;
    }

    .required {
      color: v.$neutral-300;
      font-weight: 400;
    }

    // Checkbox labels stay normal (not IFTA)
    label.checkbox,
    .woocommerce-form__label-for-checkbox {
      position: static;
      font-size: 0.8125rem;
      font-weight: 400;
      text-transform: none;
      letter-spacing: 0;
      color: v.$neutral-600;
      pointer-events: all;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0;
    }
  }

  // ── Inputs & selects ────────────────────────────────────────────────────────
  // Nest through .form-row for specificity that beats any residual WC styles.

  .form-row {
    input[type='text'],
    input[type='email'],
    input[type='tel'],
    input[type='password'],
    input[type='number'],
    input[type='search'],
    .input-text {
      height: 3.25rem;
      padding: 1.125rem 0.875rem 0.375rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      color: v.$neutral-900;
      font-family: v.$font-sans;
      font-size: 0.875rem;
      line-height: 1.5;
      border-radius: 0;
      width: 100%;
      box-sizing: border-box;
      appearance: none;
      outline: none;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      &:focus {
        outline: none;
        background-color: v.$color-white;
        border-color: v.$neutral-900;
        box-shadow: 0 0 0 1px v.$neutral-900;
      }

      &::placeholder {
        color: transparent;
      }
    }

    select {
      height: 3.25rem;
      padding: 1.125rem 2.5rem 0.375rem 0.875rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      color: v.$neutral-900;
      font-family: v.$font-sans;
      font-size: 0.875rem;
      line-height: 1.5;
      border-radius: 0;
      width: 100%;
      box-sizing: border-box;
      appearance: none;
      outline: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23a3a3a3' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.875rem center;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      &:focus {
        outline: none;
        background-color: v.$color-white;
        border-color: v.$neutral-900;
        box-shadow: 0 0 0 1px v.$neutral-900;
      }
    }

    // Select2 (country / state dropdowns)
    .select2-container .select2-selection--single {
      height: 3.25rem;
      padding-top: 1rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      border-radius: 0;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      .select2-selection__rendered {
        padding-left: 0.875rem;
        padding-right: 2.5rem;
        line-height: 2rem;
        color: v.$neutral-900;
        font-family: v.$font-sans;
        font-size: 0.875rem;
      }

      .select2-selection__arrow {
        height: 3.25rem;
        right: 0.5rem;
      }
    }

    .select2-container--focus .select2-selection--single,
    .select2-container--open .select2-selection--single {
      background-color: v.$color-white !important;
      border-color: v.$neutral-900 !important;
      box-shadow: 0 0 0 1px v.$neutral-900;
    }
  }

  // ── Validation states ───────────────────────────────────────────────────────

  .form-row.woocommerce-invalid {
    input,
    select,
    .select2-container .select2-selection--single {
      border-color: #dc2626 !important;
      box-shadow: 0 0 0 1px #dc2626;
      background-color: #fef2f2;
    }

    > label {
      color: #dc2626;
    }
  }

  .form-row.woocommerce-validated {
    input,
    select,
    .select2-container .select2-selection--single {
      border-color: transparent;
      background-color: v.$neutral-50;
    }
  }
}

// ─── Checkout: WC terms checkbox ─────────────────────────────────────────────

.woocommerce-terms-and-conditions-wrapper {
  margin-bottom: 1rem;

  .woocommerce-form__label-for-checkbox {
    font-size: 0.8125rem;
    color: v.$neutral-600;
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    line-height: 1.5;

    input {
      margin-top: 0.25rem;
      accent-color: v.$color-black;
    }
  }
}

// ─── Thank-you page: order details ───────────────────────────────────────────

.lenvy-thankyou-details {
  border: 1px solid v.$neutral-200;
  padding: 0 1.5rem;
}

.lenvy-thankyou-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  padding: 0.75rem 0;
  border-bottom: 1px solid v.$neutral-100;
  font-size: 0.875rem;

  &:last-child {
    border-bottom: none;
  }

  span {
    color: v.$neutral-500;
  }

  strong {
    color: v.$neutral-900;
    font-weight: 500;
  }
}

// ─── My Account: layout reset ─────────────────────────────────────────────────
// woocommerce-layout.css sets these float-based rules that fight our flex layout:
//   .woocommerce-account .woocommerce-MyAccount-navigation { float: left; width: 30% }
//   .woocommerce-account .woocommerce-MyAccount-content    { float: right; width: 68% }
// Inside our 192px sidebar, width: 30% = ~57px — too narrow for any text without wrapping.
// Reset both so our Tailwind flex container drives the layout.

.woocommerce-account .woocommerce-MyAccount-navigation {
  float: none !important;
  width: 100% !important;
}

.woocommerce-account .woocommerce-MyAccount-content {
  float: none !important;
  width: 100% !important;
}

// ─── My Account: navigation ───────────────────────────────────────────────────
// Reset WC's default list and link styles; Tailwind handles spacing via PHP classes.

.woocommerce-MyAccount-navigation {
  ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  // WC default sets padding: 6px 12px on nav links — reset it.
  ul li a {
    padding: 0;
    display: flex;
  }
}

// ─── My Account: orders table ─────────────────────────────────────────────────

.woocommerce-orders-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.875rem;

  thead th {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: v.$neutral-500;
    padding-bottom: 0.75rem;
    padding-right: 1.5rem;
    border-bottom: 1px solid v.$neutral-200;
    text-align: left;
    white-space: nowrap;
  }

  tbody td {
    padding: 0.875rem 1.5rem 0.875rem 0;
    border-bottom: 1px solid v.$neutral-100;
    color: v.$neutral-800;
    vertical-align: middle;
  }

  .woocommerce-button.button {
    font-size: 0.6875rem;
    padding: 0.375rem 0.875rem;
  }
}

// ─── My Account: addresses ────────────────────────────────────────────────────
// WC renders billing + shipping in .u-columns.col2-set.addresses with float-based
// .col-1 / .col-2 children. The clearfix ::before/::after on .col2-set creates
// anonymous flex children that break flex layout. Use a template override
// (woocommerce/myaccount/my-address.php) with clean Tailwind grid markup instead.
// The styles below are for the address card interior only.

.woocommerce-Address {
  min-width: 0;
}

// Address card header: h2 + edit link side by side.
// WC template: <header class="woocommerce-Address-title title"><h2>...</h2><a class="edit">...</a></header>
.woocommerce-Address-title {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1rem;
  padding-bottom: 0.75rem;
  border-bottom: 1px solid v.$neutral-100;

  // WC template uses h2 (not h3) for the address type label.
  h2 {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: v.$neutral-800;
    margin: 0;
  }

  .edit {
    font-size: 0.75rem;
    color: v.$neutral-500;
    text-decoration: underline;
    text-underline-offset: 2px;
    white-space: nowrap;
    margin-left: 0.75rem;

    &:hover {
      color: v.$color-black;
    }
  }
}

// Address text block.
.woocommerce-Address address {
  font-style: normal;
  font-size: 0.875rem;
  color: v.$neutral-700;
  line-height: 1.7;
}

// ─── My Account: section headings ─────────────────────────────────────────────

.woocommerce-MyAccount-content {
  width: 100%;

  > p:first-child {
    font-size: 0.875rem;
    color: v.$neutral-600;
    margin-bottom: 1.5rem;
  }
}

// ─── Account: login / register form inputs ───────────────────────────────────
// Labels are Tailwind-styled inline in form-login.php. Only modernise the
// inputs here: taller, background tint, double-ring focus.

.woocommerce .lenvy-account-auth {
  .form-row {
    input[type='text'],
    input[type='email'],
    input[type='password'],
    .input-text {
      height: 3.25rem;
      padding: 0.625rem 0.875rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      color: v.$neutral-900;
      font-family: v.$font-sans;
      font-size: 0.875rem;
      line-height: 1.5;
      border-radius: 0;
      width: 100%;
      box-sizing: border-box;
      appearance: none;
      outline: none;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      &:focus {
        outline: none;
        background-color: v.$color-white;
        border-color: v.$neutral-900;
        box-shadow: 0 0 0 1px v.$neutral-900;
      }

      &::placeholder {
        color: v.$neutral-400;
      }
    }
  }

  // Override WC global button styles — these buttons use Tailwind for visuals.
  button.button,
  .woocommerce-button {
    display: block;
    width: 100%;
    height: 3rem;
    background-color: v.$color-primary;
    color: v.$color-black;
    font-family: v.$font-sans;
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    line-height: 3rem;
    text-align: center;
    border: none;
    border-radius: 0;
    cursor: pointer;
    transition: background-color 200ms ease;
    padding: 0;

    &:hover {
      background-color: v.$color-primary-hover;
      color: v.$color-black;
    }
  }
}

// ─── Account: edit-account & edit-address forms (IFTA) ───────────────────────
// These pages render WC form-row markup inside .woocommerce-MyAccount-content.
// Apply the same IFTA label pattern + modern inputs as checkout.

.woocommerce .woocommerce-MyAccount-content {
  // Grid layout for edit-account form (first/last name side by side)
  form.edit-account {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.125rem 0.75rem;

    .form-row-wide,
    fieldset,
    > p:last-child,
    .clear {
      grid-column: 1 / -1;
    }

    .clear {
      display: none;
    }

    @media (max-width: 639px) {
      grid-template-columns: 1fr;
    }
  }

  // Grid layout for edit-address form
  .woocommerce-address-fields__field-wrapper {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.125rem 0.75rem;

    .form-row-wide {
      grid-column: 1 / -1;
    }

    .form-row-first,
    .form-row-last {
      grid-column: auto;
    }

    @media (max-width: 639px) {
      grid-template-columns: 1fr;

      .form-row-first,
      .form-row-last {
        grid-column: 1 / -1;
      }
    }
  }

  // Fieldset (password change section)
  fieldset {
    border: none;
    padding: 0;
    margin: 1.5rem 0 0;

    legend {
      font-family: v.$font-sans;
      font-size: 0.875rem;
      font-weight: 600;
      color: v.$neutral-900;
      margin-bottom: 1.5rem;
      padding: 0;
    }

    // Password fields stack vertically — need gap since they're not in a CSS grid.
    .form-row {
      margin-bottom: 1.125rem;
    }
  }

  // Address page heading
  .woocommerce-address-fields h2 {
    font-family: v.$font-sans;
    font-size: 0.875rem;
    font-weight: 600;
    color: v.$neutral-900;
    margin-bottom: 1.5rem;
  }

  // Spacing between address field grid and submit button
  .woocommerce-address-fields__field-wrapper {
    margin-bottom: 1.5rem;
  }

  // IFTA label — for rows containing text/select inputs
  .form-row {
    position: relative;
    margin-bottom: 0;

    &:has(input:not([type='checkbox']):not([type='hidden']), select, .password-input) > label:not(.checkbox):not(.woocommerce-form__label-for-checkbox) {
      position: absolute;
      top: 0.4375rem;
      left: 0.875rem;
      right: 0.875rem;
      z-index: 1;
      display: block;
      font-size: 0.5625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      line-height: 1;
      color: v.$neutral-400;
      pointer-events: none;
      margin-bottom: 0;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      transition: color 200ms ease;
    }

    &:has(input:focus, select:focus, .select2-container--focus, .select2-container--open) > label:not(.checkbox):not(.woocommerce-form__label-for-checkbox) {
      color: v.$neutral-600;
    }

    .required {
      color: v.$neutral-300;
      font-weight: 400;
    }

    // Modern input treatment
    input[type='text'],
    input[type='email'],
    input[type='tel'],
    input[type='password'],
    input[type='number'],
    .input-text {
      height: 3.25rem;
      padding: 1.125rem 0.875rem 0.375rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      color: v.$neutral-900;
      font-family: v.$font-sans;
      font-size: 0.875rem;
      line-height: 1.5;
      border-radius: 0;
      width: 100%;
      box-sizing: border-box;
      appearance: none;
      outline: none;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      &:focus {
        outline: none;
        background-color: v.$color-white;
        border-color: v.$neutral-900;
        box-shadow: 0 0 0 1px v.$neutral-900;
      }

      &::placeholder {
        color: transparent;
      }
    }

    select {
      height: 3.25rem;
      padding: 1.125rem 2.5rem 0.375rem 0.875rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      color: v.$neutral-900;
      font-family: v.$font-sans;
      font-size: 0.875rem;
      line-height: 1.5;
      border-radius: 0;
      width: 100%;
      box-sizing: border-box;
      appearance: none;
      outline: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%23a3a3a3' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 0.875rem center;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      &:focus {
        outline: none;
        background-color: v.$color-white;
        border-color: v.$neutral-900;
        box-shadow: 0 0 0 1px v.$neutral-900;
      }
    }

    // Select2 (country/state dropdowns)
    .select2-container .select2-selection--single {
      height: 3.25rem;
      padding-top: 1rem;
      background-color: v.$neutral-50;
      border: 1px solid transparent;
      border-radius: 0;
      transition:
        border-color 200ms ease,
        box-shadow 200ms ease,
        background-color 200ms ease;

      .select2-selection__rendered {
        padding-left: 0.875rem;
        padding-right: 2.5rem;
        line-height: 2rem;
        color: v.$neutral-900;
        font-family: v.$font-sans;
        font-size: 0.875rem;
      }

      .select2-selection__arrow {
        height: 3.25rem;
        right: 0.5rem;
      }
    }

    .select2-container--focus .select2-selection--single,
    .select2-container--open .select2-selection--single {
      background-color: v.$color-white !important;
      border-color: v.$neutral-900 !important;
      box-shadow: 0 0 0 1px v.$neutral-900;
    }

    // Validation
    &.woocommerce-invalid {
      input, select, .select2-container .select2-selection--single {
        border-color: #dc2626 !important;
        box-shadow: 0 0 0 1px #dc2626;
        background-color: #fef2f2;
      }

      > label {
        color: #dc2626;
      }
    }
  }

  // Save / submit button
  .woocommerce-Button,
  button.button {
    display: block;
    width: 100%;
    height: 3rem;
    background-color: v.$color-primary;
    color: v.$color-black;
    font-family: v.$font-sans;
    font-size: 0.6875rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    border: none;
    border-radius: 0;
    cursor: pointer;
    transition: background-color 200ms ease;

    &:hover {
      background-color: v.$color-primary-hover;
    }
  }
}

// ─── WooCommerce Blocks: cart & checkout page container ───────────────────────
// The cart and checkout pages use WC Block content (wp:woocommerce/cart and
// wp:woocommerce/checkout). These render a bare full-width block wrapper with
// no horizontal padding. Apply the same container logic as .lenvy-container.

.wp-block-woocommerce-cart,
.wp-block-woocommerce-checkout {
  box-sizing: border-box;
  width: 100%;
  max-width: var(--container-width);
  margin-inline: auto;
  padding-inline: 1rem;
  padding-block: 3rem;

  @media (min-width: 640px) {
    padding-inline: 1.5rem;
  }

  @media (min-width: 1024px) {
    padding-inline: 2rem;
    padding-block: 4rem;
  }
}

// ─── Sale badge (WC native output) ────────────────────────────────────────────
// WC renders <span class="onsale"> — override default styles.

.woocommerce span.onsale {
  display: inline-block;
  padding: 0.25rem 0.625rem;
  background-color: v.$color-black;
  color: v.$color-white;
  font-size: 0.625rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  line-height: 1.6;
  border-radius: 0;
  min-height: auto;
  min-width: auto;
}
