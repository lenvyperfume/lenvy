function H(){var e;const t=document.querySelector("[data-header]");if(t){const n=()=>t.classList.toggle("shadow-sm",window.scrollY>8);window.addEventListener("scroll",n,{passive:!0}),n()}(e=document.querySelector("[data-dismiss-announcement]"))==null||e.addEventListener("click",function(){var n;(n=this.closest("[data-announcement]"))==null||n.remove()})}function O(){const t=document.querySelector("[data-drawer-toggle]"),e=document.querySelector("[data-drawer-close]"),n=document.querySelector("[data-drawer]"),r=document.querySelector("[data-drawer-backdrop]");function a(){var i;n&&(n.classList.remove("-translate-x-full"),n.setAttribute("aria-hidden","false"),r==null||r.classList.remove("opacity-0","pointer-events-none"),t==null||t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden",(i=n.querySelector("a, button"))==null||i.focus())}function s(){n&&(n.classList.add("-translate-x-full"),n.setAttribute("aria-hidden","true"),r==null||r.classList.add("opacity-0","pointer-events-none"),t==null||t.setAttribute("aria-expanded","false"),document.body.style.overflow="",t==null||t.focus())}return t==null||t.addEventListener("click",a),e==null||e.addEventListener("click",s),r==null||r.addEventListener("click",s),{drawer:n,closeDrawer:s}}function D(t){const e=document.createElement("span");return e.textContent=t,e.innerHTML}function F(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}const $='<svg class="w-3.5 h-3.5 shrink-0 text-neutral-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>';function B(){const t=document.querySelector("[data-search-toggle]"),e=document.querySelector("[data-search-overlay]"),n=document.querySelector("[data-search-band]"),r=e==null?void 0:e.querySelector("[data-search-input]");e==null||e.querySelector("[data-search-panel]");const a={};e==null||e.querySelectorAll("[data-search-state]").forEach(c=>{a[c.getAttribute("data-search-state")]=c});const s=e==null?void 0:e.querySelector("[data-search-products]"),i=e==null?void 0:e.querySelector("[data-search-brands-section]"),o=e==null?void 0:e.querySelector("[data-search-brands]"),l=e==null?void 0:e.querySelector("[data-search-categories-section]"),u=e==null?void 0:e.querySelector("[data-search-categories]"),y=e==null?void 0:e.querySelector("[data-search-all-results]"),h=e==null?void 0:e.querySelector("[data-search-all-results-text]");let b=null,d=null;function m(c){Object.entries(a).forEach(([p,v])=>{v.classList.toggle("hidden",p!==c)})}async function S(c){var v,C;d&&d.abort(),d=new AbortController,m("loading");const p=new URLSearchParams({action:"lenvy_live_search",nonce:((v=window.lenvyAjax)==null?void 0:v.nonce)||"",query:c});try{const x=await(await fetch(`${((C=window.lenvyAjax)==null?void 0:C.url)||"/wp-admin/admin-ajax.php"}?${p}`,{signal:d.signal})).json();if(!x.success||!x.data){m("no-results");return}const{products_html:f,products_count:w,brands:M,categories:T,results_url:_,query:E}=x.data;if(!w&&!M.length&&!T.length){m("no-results");return}s&&(s.innerHTML=f),o&&i&&(M.length?(i.classList.remove("hidden"),o.innerHTML=M.map(g=>`<li><a href="${F(g.url)}" class="flex items-center justify-between gap-2 py-1.5 text-sm text-neutral-700 hover:text-black transition-colors duration-150"><span>${D(g.name)}</span><span class="flex items-center gap-1 text-xs text-neutral-400"><span>${g.count}</span>${$}</span></a></li>`).join("")):i.classList.add("hidden")),u&&l&&(T.length?(l.classList.remove("hidden"),u.innerHTML=T.map(g=>`<li><a href="${F(g.url)}" class="flex items-center justify-between gap-2 py-1.5 text-sm text-neutral-700 hover:text-black transition-colors duration-150"><span>${D(g.name)}</span><span class="flex items-center gap-1 text-xs text-neutral-400"><span>${g.count}</span>${$}</span></a></li>`).join("")):l.classList.add("hidden")),y&&h&&(y.href=_,h.textContent=`Alle resultaten voor '${E}'`),m("results")}catch(L){if(L.name==="AbortError")return;m("no-results")}}function A(){const c=((r==null?void 0:r.value)||"").trim();if(clearTimeout(b),c.length<2){m("empty"),d&&(d.abort(),d=null);return}b=setTimeout(()=>S(c),300)}function q(){e&&(e.classList.remove("opacity-0","pointer-events-none"),e.setAttribute("aria-hidden","false"),n==null||n.classList.remove("-translate-y-full"),document.body.style.overflow="hidden",setTimeout(()=>r==null?void 0:r.focus(),60))}function k(){e&&(n==null||n.classList.add("-translate-y-full"),setTimeout(()=>{e.classList.add("opacity-0","pointer-events-none"),e.setAttribute("aria-hidden","true")},150),document.body.style.overflow="",r&&(r.value=""),clearTimeout(b),d&&(d.abort(),d=null),m("empty"),t==null||t.focus())}return t==null||t.addEventListener("click",q),r==null||r.addEventListener("input",A),e==null||e.querySelectorAll("[data-search-close]").forEach(c=>{c.addEventListener("click",k)}),{overlay:e,closeSearch:k}}function I(){document.querySelectorAll("[data-mobile-submenu-toggle]").forEach(t=>{const e=t.closest("li"),n=e==null?void 0:e.querySelector(".mobile-submenu");n&&t.addEventListener("click",()=>{var a,s;t.getAttribute("aria-expanded")==="true"?(n.style.maxHeight="0",n.style.opacity="0",n.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false"),(a=t.querySelector("svg"))==null||a.classList.remove("rotate-180")):(n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",n.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true"),(s=t.querySelector("svg"))==null||s.classList.add("rotate-180"))})}),document.querySelectorAll("[data-filter-accordion-toggle]").forEach(t=>{const e=t.getAttribute("aria-controls"),n=e?document.getElementById(e):null;n&&t.addEventListener("click",()=>{var a;const r=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!r)),n.style.display=r?"none":"",(a=t.querySelector("svg"))==null||a.classList.toggle("rotate-180",!r)})})}function U(){const t=document.querySelector("[data-filter-drawer]"),e=document.querySelector("[data-filter-drawer-backdrop]");if(!t)return{filterDrawer:null,closeFilterDrawer:()=>{}};const n=()=>{var a;t.classList.remove("-translate-x-full"),t.setAttribute("aria-hidden","false"),e==null||e.classList.remove("opacity-0","pointer-events-none"),document.body.style.overflow="hidden",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(s=>{s.setAttribute("aria-expanded","true")}),(a=t.querySelector("button, input, select, a[href]"))==null||a.focus()},r=()=>{t.classList.add("-translate-x-full"),t.setAttribute("aria-hidden","true"),e==null||e.classList.add("opacity-0","pointer-events-none"),document.body.style.overflow="",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(a=>{a.setAttribute("aria-expanded","false")})};return document.querySelectorAll("[data-filter-drawer-toggle]").forEach(a=>{a.addEventListener("click",n)}),document.querySelectorAll("[data-filter-drawer-close]").forEach(a=>{a.addEventListener("click",r)}),e==null||e.addEventListener("click",r),{filterDrawer:t,closeFilterDrawer:r}}function z(){document.querySelectorAll("[data-price-slider]").forEach(W)}function W(t){const e=parseFloat(t.dataset.min),n=parseFloat(t.dataset.max);let r=parseFloat(t.dataset.currentMin),a=parseFloat(t.dataset.currentMax);const s=t.querySelector("[data-slider-track]"),i=t.querySelector("[data-slider-range]"),o=t.querySelector('[data-slider-thumb="min"]'),l=t.querySelector('[data-slider-thumb="max"]'),u=t.querySelector('[data-slider-input="min"]'),y=t.querySelector('[data-slider-input="max"]'),h=t.querySelector('[data-slider-label="min"]'),b=t.querySelector('[data-slider-label="max"]');if(!s||!o||!l)return;const d=n-e;function m(c){return(c-e)/d*100}function S(){const c=m(r),p=m(a);o.style.left=c+"%",l.style.left=p+"%",i&&(i.style.left=c+"%",i.style.width=p-c+"%"),u&&(u.value=r),y&&(y.value=a),o.setAttribute("aria-valuenow",r),l.setAttribute("aria-valuenow",a)}function A(){if(!h||!b)return;const c=p=>(h.textContent.replace(/[\d.,\s]/g,"").trim()||"€")+Math.round(p);h.textContent=c(r),b.textContent=c(a)}function q(){u&&(u.disabled=r<=e),y&&(y.disabled=a>=n)}S(),q();function k(c,p){let v=!1;const C=f=>{f.preventDefault(),v=!0,document.addEventListener("mousemove",L),document.addEventListener("mouseup",x),document.addEventListener("touchmove",L,{passive:!1}),document.addEventListener("touchend",x)},L=f=>{if(!v)return;const w=s.getBoundingClientRect(),M=f.touches?f.touches[0].clientX:f.clientX,T=Math.max(0,Math.min(1,(M-w.left)/w.width)),_=e+T*d,E=d>=1e3?10:d>=100?5:1,g=Math.round(_/E)*E;p?r=Math.max(e,Math.min(g,a-E)):a=Math.min(n,Math.max(g,r+E)),S(),A(),q()},x=()=>{v&&(v=!1,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",L),document.removeEventListener("touchend",x))};c.addEventListener("mousedown",C),c.addEventListener("touchstart",C,{passive:!1}),c.addEventListener("keydown",f=>{const w=d>=1e3?10:d>=100?5:1;f.key==="ArrowLeft"||f.key==="ArrowDown"?(f.preventDefault(),p?r=Math.max(e,r-w):a=Math.max(r+w,a-w),S(),A(),q()):(f.key==="ArrowRight"||f.key==="ArrowUp")&&(f.preventDefault(),p?r=Math.min(a-w,r+w):a=Math.min(n,a+w),S(),A(),q())})}k(o,!0),k(l,!1)}function Q(){document.querySelectorAll("[data-product-gallery]").forEach(X)}function X(t){const e=t.querySelector("[data-gallery-main]"),n=Array.from(t.querySelectorAll("[data-gallery-thumb]"));if(!e)return;function r(a){const s=a.dataset.src;if(!s||e.src===s)return;e.style.opacity="0",e.style.transition="opacity 200ms ease";const i=new Image;i.onload=()=>{e.src=s,e.style.opacity="1"},i.src=s,n.forEach(o=>{o.classList.remove("border-black"),o.classList.add("border-transparent")}),a.classList.remove("border-transparent"),a.classList.add("border-black")}n.forEach(a=>{a.addEventListener("click",()=>r(a))}),t.addEventListener("keydown",a=>{const s=document.activeElement,i=n.indexOf(s);i!==-1&&(a.key==="ArrowRight"&&i<n.length-1?(a.preventDefault(),n[i+1].focus(),r(n[i+1])):a.key==="ArrowLeft"&&i>0&&(a.preventDefault(),n[i-1].focus(),r(n[i-1])))}),Y(e)}function Y(t){const e=t.parentElement;if(!e)return;e.style.cursor="zoom-in";let n=null;function r(){return n||(n=document.createElement("div"),n.setAttribute("role","dialog"),n.setAttribute("aria-label","Image lightbox"),n.setAttribute("aria-modal","true"),n.style.cssText="position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0.92);display:none;align-items:center;justify-content:center;padding:1.5rem;opacity:0;transition:opacity 200ms ease;",n.innerHTML='<button type="button" data-lb-close style="position:absolute;top:1rem;right:1rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.7);background:none;border:none;cursor:pointer;transition:color 150ms ease;" aria-label="Close lightbox"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M16 4L4 16M4 4l12 12"/></svg></button><img data-lb-img src="" alt="" style="max-width:100%;max-height:100%;object-fit:contain;user-select:none;">',document.body.appendChild(n),n.querySelector("[data-lb-close]").addEventListener("mouseenter",o=>{o.currentTarget.style.color="#fff"}),n.querySelector("[data-lb-close]").addEventListener("mouseleave",o=>{o.currentTarget.style.color="rgba(255,255,255,0.7)"}),n.addEventListener("click",o=>{(o.target===n||o.target.closest("[data-lb-close]"))&&s()}),n)}function a(){const o=r(),l=o.querySelector("[data-lb-img]");l.src=t.src,l.alt=t.alt,o.style.display="flex",requestAnimationFrame(()=>{o.style.opacity="1"}),document.addEventListener("keydown",i),document.body.style.overflow="hidden"}function s(){n&&(n.style.opacity="0",setTimeout(()=>{n.style.display="none"},200),document.removeEventListener("keydown",i),document.body.style.overflow="")}function i(o){o.key==="Escape"&&s()}e.addEventListener("click",a)}function G(){document.body.addEventListener("added_to_cart",t=>{const e=t.detail??{};typeof e.cart_count=="number"&&j(e.cart_count)}),window.jQuery&&window.jQuery(document.body).on("added_to_cart",(t,e,n,r)=>{N()})}function j(t){document.querySelectorAll("[data-cart-count]").forEach(e=>{t>0?(e.textContent=t>99?"99+":String(t),e.style.display=""):e.style.display="none"}),document.querySelectorAll("[data-cart-link]").forEach(e=>{e.setAttribute("aria-label",t===1?"Cart, 1 item":`Cart, ${t} items`)})}function N(){window.lenvyAjax&&(new URLSearchParams({action:"lenvy_add_to_cart",nonce:window.lenvyAjax.nonce,product_id:"0"}),fetch(window.lenvyAjax.url+"?action=woocommerce_get_refreshed_fragments",{method:"POST",credentials:"same-origin"}).then(t=>t.json()).then(t=>{if(t&&t.cart_hash!==void 0){const e=JSON.stringify(t.fragments??{}).match(/"cart_count":(\d+)/);e&&j(parseInt(e[1],10))}}).catch(()=>{}))}function J(){document.addEventListener("click",K)}function K(t){var s,i;const e=t.target.closest("[data-quick-add]");if(!e||e.disabled)return;t.preventDefault();const n=e.dataset.productId;if(!n)return;const r=e.textContent.trim();e.disabled=!0,e.textContent="…";const a=new URLSearchParams({action:"lenvy_add_to_cart",nonce:((s=window.lenvyAjax)==null?void 0:s.nonce)??"",product_id:n,quantity:"1"});fetch(((i=window.lenvyAjax)==null?void 0:i.url)??"",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()}).then(o=>o.json()).then(o=>{o.success?(j(o.data.cart_count),e.textContent="✓",setTimeout(()=>{e.textContent=r,e.disabled=!1},1400)):(e.textContent=r,e.disabled=!1)}).catch(()=>{e.textContent=r,e.disabled=!1})}function V(){document.querySelector("[data-product-grid]")&&(document.querySelectorAll("[data-filter-form]").forEach(e=>{e.addEventListener("submit",Z)}),window.addEventListener("popstate",()=>{R(new URLSearchParams(window.location.search))}))}function Z(t){t.preventDefault();const e=new FormData(t.currentTarget),n=new URLSearchParams;for(const[a,s]of e.entries())n.append(a,s);const r=window.location.pathname+(n.toString()?"?"+n.toString():"");history.pushState({},"",r),R(n)}function R(t){const e=document.querySelector("[data-product-grid]");if(!e||!window.lenvyAjax)return;const n=e.dataset.taxonomy??"",r=e.dataset.term??"";e.style.opacity="0.4",e.style.pointerEvents="none",e.style.transition="opacity 200ms ease";const a=new URLSearchParams(t);a.set("action","lenvy_filter_products"),a.set("nonce",window.lenvyAjax.nonce),a.set("taxonomy",n),a.set("term",r),a.set("paged",ee(t)),a.set("page_url",window.location.pathname),fetch(window.lenvyAjax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()}).then(s=>s.json()).then(s=>{var d;if(!s.success){P(e);return}const{html:i,count:o,pagination:l,active:u}=s.data;e.innerHTML=i,e.style.opacity="",e.style.pointerEvents="";const y=document.querySelector(".lenvy-pagination");l?y?y.outerHTML=l:e.insertAdjacentHTML("afterend",l):y&&y.remove();const h=document.querySelector("[data-active-filters]");if(u.trim())if(h)h.outerHTML=u;else{const m=document.querySelector("[data-sort-bar]");m&&m.insertAdjacentHTML("afterend",u)}else h&&h.remove();te(o,t),(d=document.querySelector("[data-filter-drawer-close]"))==null||d.click();const b=e.getBoundingClientRect().top+window.scrollY;window.scrollY>b-80&&window.scrollTo({top:b-80,behavior:"smooth"})}).catch(()=>P(e))}function P(t){t.style.opacity="",t.style.pointerEvents=""}function ee(t){return t.get("paged")??"1"}function te(t,e){var l;const n=document.querySelector("[data-results-count]");if(!n)return;const r=12,a=parseInt(e.get("paged")??"1",10),s=(a-1)*r+1,i=Math.min(a*r,t),o=((l=window.lenvyAjax)==null?void 0:l.strings)??{};if(t>0){const u=o.results_showing??`Showing ${s}–${i} of ${t} products`;n.textContent=u.replace("%1$s",s).replace("%2$s",i).replace("%3$s",t)}else n.textContent=o.results_none??"No products found"}function ne(){document.querySelectorAll("[data-product-carousel]").forEach(t=>{const e=t.querySelector("[data-carousel-track]"),n=t.querySelector("[data-carousel-prev]"),r=t.querySelector("[data-carousel-next]");if(!e)return;function a(){if(!n||!r)return;const{scrollLeft:o,scrollWidth:l,clientWidth:u}=e;n.disabled=o<=1,r.disabled=o+u>=l-1}function s(){const o=e.querySelector(".lenvy-product-carousel__item");if(!o)return e.clientWidth;const l=parseFloat(getComputedStyle(e).gap)||16;return(o.offsetWidth+l)*2}n&&n.addEventListener("click",()=>{e.scrollBy({left:-s(),behavior:"smooth"})}),r&&r.addEventListener("click",()=>{e.scrollBy({left:s(),behavior:"smooth"})}),e.addEventListener("scroll",a,{passive:!0}),a();let i;window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(a,150)})})}document.documentElement.style.opacity="1";document.addEventListener("DOMContentLoaded",()=>{H();const{drawer:t,closeDrawer:e}=O(),{overlay:n,closeSearch:r}=B(),{filterDrawer:a,closeFilterDrawer:s}=U();I(),z(),Q(),G(),J(),V(),ne(),document.querySelectorAll("[data-sort-select]").forEach(i=>{i.addEventListener("change",()=>{const o=new URL(window.location.href);o.searchParams.set("orderby",i.value),window.location.href=o.toString()})}),document.addEventListener("keydown",i=>{i.key==="Escape"&&(n&&!n.classList.contains("opacity-0")&&r(),t&&!t.classList.contains("-translate-x-full")&&e(),a&&!a.classList.contains("-translate-x-full")&&s())})});document.addEventListener("click",t=>{const e=t.target.closest("[data-qty-minus], [data-qty-plus]");if(!e)return;const n=e.closest("[data-lenvy-qty]"),r=n==null?void 0:n.querySelector("input.qty");if(!r)return;const a=parseFloat(r.step)||1,s=parseFloat(r.min)||0,i=parseFloat(r.max)||1/0;let o=parseFloat(r.value)||s;e.hasAttribute("data-qty-minus")?o=Math.max(s,o-a):o=Math.min(i,o+a),r.value=o,r.dispatchEvent(new Event("change",{bubbles:!0}))});document.addEventListener("DOMContentLoaded",()=>{let t=null;document.addEventListener("change",e=>{if(!e.target.matches(".woocommerce-cart-form input.qty"))return;const n=e.target.closest("form.woocommerce-cart-form"),r=n==null?void 0:n.querySelector('[name="update_cart"]');!n||!r||(r.disabled=!1,clearTimeout(t),t=setTimeout(()=>r.click(),600))})});
