function F(){var t;const e=document.querySelector("[data-header]");if(e){const n=()=>e.classList.toggle("shadow-sm",window.scrollY>8);window.addEventListener("scroll",n,{passive:!0}),n()}(t=document.querySelector("[data-dismiss-announcement]"))==null||t.addEventListener("click",function(){var n;(n=this.closest("[data-announcement]"))==null||n.remove()})}function R(){const e=document.querySelector("[data-drawer-toggle]"),t=document.querySelector("[data-drawer-close]"),n=document.querySelector("[data-drawer]"),a=document.querySelector("[data-drawer-backdrop]");function r(){var c;n&&(n.classList.remove("-translate-x-full"),n.setAttribute("aria-hidden","false"),a==null||a.classList.remove("opacity-0","pointer-events-none"),e==null||e.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden",(c=n.querySelector("a, button"))==null||c.focus())}function o(){n&&(n.classList.add("-translate-x-full"),n.setAttribute("aria-hidden","true"),a==null||a.classList.add("opacity-0","pointer-events-none"),e==null||e.setAttribute("aria-expanded","false"),document.body.style.overflow="",e==null||e.focus())}return e==null||e.addEventListener("click",r),t==null||t.addEventListener("click",o),a==null||a.addEventListener("click",o),{drawer:n,closeDrawer:o}}function O(){const e=document.querySelector("[data-search-toggle]"),t=document.querySelector("[data-search-close]"),n=document.querySelector("[data-search-overlay]"),a=n==null?void 0:n.querySelector('input[type="search"]');function r(){n&&(n.classList.remove("opacity-0","pointer-events-none"),n.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",setTimeout(()=>a==null?void 0:a.focus(),50))}function o(){n&&(n.classList.add("opacity-0","pointer-events-none"),n.setAttribute("aria-hidden","true"),document.body.style.overflow="",e==null||e.focus())}return e==null||e.addEventListener("click",r),t==null||t.addEventListener("click",o),{overlay:n,closeSearch:o}}function H(){document.querySelectorAll("[data-mobile-submenu-toggle]").forEach(e=>{const t=e.closest("li"),n=t==null?void 0:t.querySelector(".mobile-submenu");n&&e.addEventListener("click",()=>{var r,o;e.getAttribute("aria-expanded")==="true"?(n.style.maxHeight="0",n.style.opacity="0",n.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false"),(r=e.querySelector("svg"))==null||r.classList.remove("rotate-180")):(n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",n.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true"),(o=e.querySelector("svg"))==null||o.classList.add("rotate-180"))})}),document.querySelectorAll("[data-filter-accordion-toggle]").forEach(e=>{const t=e.getAttribute("aria-controls"),n=t?document.getElementById(t):null;n&&e.addEventListener("click",()=>{var r;const a=e.getAttribute("aria-expanded")==="true";e.setAttribute("aria-expanded",String(!a)),n.style.display=a?"none":"",(r=e.querySelector("svg"))==null||r.classList.toggle("rotate-180",!a)})})}function I(){const e=document.querySelector("[data-filter-drawer]"),t=document.querySelector("[data-filter-drawer-backdrop]");if(!e)return{filterDrawer:null,closeFilterDrawer:()=>{}};const n=()=>{var r;e.classList.remove("-translate-x-full"),e.setAttribute("aria-hidden","false"),t==null||t.classList.remove("opacity-0","pointer-events-none"),document.body.style.overflow="hidden",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(o=>{o.setAttribute("aria-expanded","true")}),(r=e.querySelector("button, input, select, a[href]"))==null||r.focus()},a=()=>{e.classList.add("-translate-x-full"),e.setAttribute("aria-hidden","true"),t==null||t.classList.add("opacity-0","pointer-events-none"),document.body.style.overflow="",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(r=>{r.setAttribute("aria-expanded","false")})};return document.querySelectorAll("[data-filter-drawer-toggle]").forEach(r=>{r.addEventListener("click",n)}),document.querySelectorAll("[data-filter-drawer-close]").forEach(r=>{r.addEventListener("click",a)}),t==null||t.addEventListener("click",a),{filterDrawer:e,closeFilterDrawer:a}}function U(){document.querySelectorAll("[data-price-slider]").forEach(B)}function B(e){const t=parseFloat(e.dataset.min),n=parseFloat(e.dataset.max);let a=parseFloat(e.dataset.currentMin),r=parseFloat(e.dataset.currentMax);const o=e.querySelector("[data-slider-track]"),c=e.querySelector("[data-slider-range]"),i=e.querySelector('[data-slider-thumb="min"]'),m=e.querySelector('[data-slider-thumb="max"]'),y=e.querySelector('[data-slider-input="min"]'),l=e.querySelector('[data-slider-input="max"]'),h=e.querySelector('[data-slider-label="min"]'),S=e.querySelector('[data-slider-label="max"]');if(!o||!i||!m)return;const u=n-t;function L(s){return(s-t)/u*100}function v(){const s=L(a),p=L(r);i.style.left=s+"%",m.style.left=p+"%",c&&(c.style.left=s+"%",c.style.width=p-s+"%"),y&&(y.value=a),l&&(l.value=r),i.setAttribute("aria-valuenow",a),m.setAttribute("aria-valuenow",r)}function w(){if(!h||!S)return;const s=p=>(h.textContent.replace(/[\d.,\s]/g,"").trim()||"€")+Math.round(p);h.textContent=s(a),S.textContent=s(r)}function x(){y&&(y.disabled=a<=t),l&&(l.disabled=r>=n)}v(),x();function M(s,p){let g=!1;const C=d=>{d.preventDefault(),g=!0,document.addEventListener("mousemove",E),document.addEventListener("mouseup",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",b)},E=d=>{if(!g)return;const f=o.getBoundingClientRect(),T=d.touches?d.touches[0].clientX:d.clientX,j=Math.max(0,Math.min(1,(T-f.left)/f.width)),P=t+j*u,A=u>=1e3?10:u>=100?5:1,D=Math.round(P/A)*A;p?a=Math.max(t,Math.min(D,r-A)):r=Math.min(n,Math.max(D,a+A)),v(),w(),x()},b=()=>{g&&(g=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",b))};s.addEventListener("mousedown",C),s.addEventListener("touchstart",C,{passive:!1}),s.addEventListener("keydown",d=>{const f=u>=1e3?10:u>=100?5:1;d.key==="ArrowLeft"||d.key==="ArrowDown"?(d.preventDefault(),p?a=Math.max(t,a-f):r=Math.max(a+f,r-f),v(),w(),x()):(d.key==="ArrowRight"||d.key==="ArrowUp")&&(d.preventDefault(),p?a=Math.min(r-f,a+f):r=Math.min(n,r+f),v(),w(),x())})}M(i,!0),M(m,!1)}function $(){document.querySelectorAll("[data-product-gallery]").forEach(Q)}function Q(e){const t=e.querySelector("[data-gallery-main]"),n=Array.from(e.querySelectorAll("[data-gallery-thumb]"));if(!t||!n.length)return;function a(r){const o=r.dataset.src;if(!o||t.src===o)return;t.style.opacity="0",t.style.transition="opacity 200ms ease";const c=new Image;c.onload=()=>{t.src=o,t.style.opacity="1"},c.src=o,n.forEach(i=>{i.classList.remove("border-black"),i.classList.add("border-transparent")}),r.classList.remove("border-transparent"),r.classList.add("border-black")}n.forEach(r=>{r.addEventListener("click",()=>a(r))}),e.addEventListener("keydown",r=>{const o=document.activeElement,c=n.indexOf(o);c!==-1&&(r.key==="ArrowRight"&&c<n.length-1?(r.preventDefault(),n[c+1].focus(),a(n[c+1])):r.key==="ArrowLeft"&&c>0&&(r.preventDefault(),n[c-1].focus(),a(n[c-1])))})}function X(){document.body.addEventListener("added_to_cart",e=>{const t=e.detail??{};typeof t.cart_count=="number"&&q(t.cart_count)}),window.jQuery&&window.jQuery(document.body).on("added_to_cart",(e,t,n,a)=>{Y()})}function q(e){document.querySelectorAll("[data-cart-count]").forEach(t=>{e>0?(t.textContent=e>99?"99+":String(e),t.style.display=""):t.style.display="none"}),document.querySelectorAll("[data-cart-link]").forEach(t=>{t.setAttribute("aria-label",e===1?"Cart, 1 item":`Cart, ${e} items`)})}function Y(){window.lenvyAjax&&(new URLSearchParams({action:"lenvy_add_to_cart",nonce:window.lenvyAjax.nonce,product_id:"0"}),fetch(window.lenvyAjax.url+"?action=woocommerce_get_refreshed_fragments",{method:"POST",credentials:"same-origin"}).then(e=>e.json()).then(e=>{if(e&&e.cart_hash!==void 0){const t=JSON.stringify(e.fragments??{}).match(/"cart_count":(\d+)/);t&&q(parseInt(t[1],10))}}).catch(()=>{}))}function G(){document.addEventListener("click",N)}function N(e){var o,c;const t=e.target.closest("[data-quick-add]");if(!t||t.disabled)return;e.preventDefault();const n=t.dataset.productId;if(!n)return;const a=t.textContent.trim();t.disabled=!0,t.textContent="…";const r=new URLSearchParams({action:"lenvy_add_to_cart",nonce:((o=window.lenvyAjax)==null?void 0:o.nonce)??"",product_id:n,quantity:"1"});fetch(((c=window.lenvyAjax)==null?void 0:c.url)??"",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(i=>i.json()).then(i=>{i.success?(q(i.data.cart_count),t.textContent="✓",setTimeout(()=>{t.textContent=a,t.disabled=!1},1400)):(t.textContent=a,t.disabled=!1)}).catch(()=>{t.textContent=a,t.disabled=!1})}function J(){document.querySelector("[data-product-grid]")&&(document.querySelectorAll("[data-filter-form]").forEach(t=>{t.addEventListener("submit",V)}),window.addEventListener("popstate",()=>{_(new URLSearchParams(window.location.search))}))}function V(e){e.preventDefault();const t=new FormData(e.currentTarget),n=new URLSearchParams;for(const[r,o]of t.entries())n.append(r,o);const a=window.location.pathname+(n.toString()?"?"+n.toString():"");history.pushState({},"",a),_(n)}function _(e){const t=document.querySelector("[data-product-grid]");if(!t||!window.lenvyAjax)return;const n=t.dataset.taxonomy??"",a=t.dataset.term??"";t.style.opacity="0.4",t.style.pointerEvents="none",t.style.transition="opacity 200ms ease";const r=new URLSearchParams(e);r.set("action","lenvy_filter_products"),r.set("nonce",window.lenvyAjax.nonce),r.set("taxonomy",n),r.set("term",a),r.set("paged",z(e)),fetch(window.lenvyAjax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(o=>o.json()).then(o=>{var u,L,v;if(!o.success){k(t);return}const{html:c,count:i,pagination:m,active:y}=o.data;t.innerHTML=c,t.style.opacity="",t.style.pointerEvents="";const l=document.querySelector(".lenvy-pagination");m?l?l.outerHTML=m:t.insertAdjacentHTML("afterend",m):l&&l.remove();const h=document.querySelector("[data-active-filters]");if(y.trim())if(h)h.outerHTML=y;else{const w=((u=document.querySelector("[data-filter-sidebar]"))==null?void 0:u.nextElementSibling)??((L=t.closest(".flex-1"))==null?void 0:L.querySelector("[data-active-filters]"));w&&w.insertAdjacentHTML("afterend",y)}else h&&h.remove();K(i,e),(v=document.querySelector("[data-filter-drawer-close]"))==null||v.click();const S=t.getBoundingClientRect().top+window.scrollY;window.scrollY>S-80&&window.scrollTo({top:S-80,behavior:"smooth"})}).catch(()=>k(t))}function k(e){e.style.opacity="",e.style.pointerEvents=""}function z(e){return e.get("paged")??"1"}function K(e,t){const n=document.querySelector("[data-results-count]");if(!n)return;const a=12,r=parseInt(t.get("paged")??"1",10),o=(r-1)*a+1,c=Math.min(r*a,e);n.textContent=e>0?`Showing ${o}–${c} of ${e} products`:"No products found"}document.documentElement.style.opacity="1";document.addEventListener("DOMContentLoaded",()=>{F();const{drawer:e,closeDrawer:t}=R(),{overlay:n,closeSearch:a}=O(),{filterDrawer:r,closeFilterDrawer:o}=I();H(),U(),$(),X(),G(),J(),document.querySelectorAll("[data-sort-select]").forEach(c=>{c.addEventListener("change",()=>{const i=new URL(window.location.href);i.searchParams.set("orderby",c.value),window.location.href=i.toString()})}),document.addEventListener("keydown",c=>{c.key==="Escape"&&(n&&!n.classList.contains("opacity-0")&&a(),e&&!e.classList.contains("-translate-x-full")&&t(),r&&!r.classList.contains("-translate-x-full")&&o())})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("input.qty").forEach(e=>{e.addEventListener("change",()=>{const t=e.closest("form.woocommerce-cart-form"),n=t==null?void 0:t.querySelector('[name="update_cart"]');n&&(n.disabled=!1)})})});
