function F(){var e;const t=document.querySelector("[data-header]");if(t){const n=()=>t.classList.toggle("shadow-sm",window.scrollY>8);window.addEventListener("scroll",n,{passive:!0}),n()}(e=document.querySelector("[data-dismiss-announcement]"))==null||e.addEventListener("click",function(){var n;(n=this.closest("[data-announcement]"))==null||n.remove()})}function R(){const t=document.querySelector("[data-drawer-toggle]"),e=document.querySelector("[data-drawer-close]"),n=document.querySelector("[data-drawer]"),a=document.querySelector("[data-drawer-backdrop]");function r(){var s;n&&(n.classList.remove("-translate-x-full"),n.setAttribute("aria-hidden","false"),a==null||a.classList.remove("opacity-0","pointer-events-none"),t==null||t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden",(s=n.querySelector("a, button"))==null||s.focus())}function o(){n&&(n.classList.add("-translate-x-full"),n.setAttribute("aria-hidden","true"),a==null||a.classList.add("opacity-0","pointer-events-none"),t==null||t.setAttribute("aria-expanded","false"),document.body.style.overflow="",t==null||t.focus())}return t==null||t.addEventListener("click",r),e==null||e.addEventListener("click",o),a==null||a.addEventListener("click",o),{drawer:n,closeDrawer:o}}function O(){const t=document.querySelector("[data-search-toggle]"),e=document.querySelector("[data-search-overlay]"),n=document.querySelector("[data-search-band]"),a=e==null?void 0:e.querySelector('input[type="search"]');function r(){e&&(e.classList.remove("opacity-0","pointer-events-none"),e.setAttribute("aria-hidden","false"),n==null||n.classList.remove("-translate-y-full"),document.body.style.overflow="hidden",setTimeout(()=>a==null?void 0:a.focus(),60))}function o(){e&&(n==null||n.classList.add("-translate-y-full"),setTimeout(()=>{e.classList.add("opacity-0","pointer-events-none"),e.setAttribute("aria-hidden","true")},150),document.body.style.overflow="",t==null||t.focus())}return t==null||t.addEventListener("click",r),e==null||e.querySelectorAll("[data-search-close]").forEach(s=>{s.addEventListener("click",o)}),{overlay:e,closeSearch:o}}function H(){document.querySelectorAll("[data-mobile-submenu-toggle]").forEach(t=>{const e=t.closest("li"),n=e==null?void 0:e.querySelector(".mobile-submenu");n&&t.addEventListener("click",()=>{var r,o;t.getAttribute("aria-expanded")==="true"?(n.style.maxHeight="0",n.style.opacity="0",n.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false"),(r=t.querySelector("svg"))==null||r.classList.remove("rotate-180")):(n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",n.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true"),(o=t.querySelector("svg"))==null||o.classList.add("rotate-180"))})}),document.querySelectorAll("[data-filter-accordion-toggle]").forEach(t=>{const e=t.getAttribute("aria-controls"),n=e?document.getElementById(e):null;n&&t.addEventListener("click",()=>{var r;const a=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!a)),n.style.display=a?"none":"",(r=t.querySelector("svg"))==null||r.classList.toggle("rotate-180",!a)})})}function I(){const t=document.querySelector("[data-filter-drawer]"),e=document.querySelector("[data-filter-drawer-backdrop]");if(!t)return{filterDrawer:null,closeFilterDrawer:()=>{}};const n=()=>{var r;t.classList.remove("-translate-x-full"),t.setAttribute("aria-hidden","false"),e==null||e.classList.remove("opacity-0","pointer-events-none"),document.body.style.overflow="hidden",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(o=>{o.setAttribute("aria-expanded","true")}),(r=t.querySelector("button, input, select, a[href]"))==null||r.focus()},a=()=>{t.classList.add("-translate-x-full"),t.setAttribute("aria-hidden","true"),e==null||e.classList.add("opacity-0","pointer-events-none"),document.body.style.overflow="",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(r=>{r.setAttribute("aria-expanded","false")})};return document.querySelectorAll("[data-filter-drawer-toggle]").forEach(r=>{r.addEventListener("click",n)}),document.querySelectorAll("[data-filter-drawer-close]").forEach(r=>{r.addEventListener("click",a)}),e==null||e.addEventListener("click",a),{filterDrawer:t,closeFilterDrawer:a}}function U(){document.querySelectorAll("[data-price-slider]").forEach($)}function $(t){const e=parseFloat(t.dataset.min),n=parseFloat(t.dataset.max);let a=parseFloat(t.dataset.currentMin),r=parseFloat(t.dataset.currentMax);const o=t.querySelector("[data-slider-track]"),s=t.querySelector("[data-slider-range]"),i=t.querySelector('[data-slider-thumb="min"]'),c=t.querySelector('[data-slider-thumb="max"]'),u=t.querySelector('[data-slider-input="min"]'),f=t.querySelector('[data-slider-input="max"]'),p=t.querySelector('[data-slider-label="min"]'),g=t.querySelector('[data-slider-label="max"]');if(!o||!i||!c)return;const m=n-e;function b(l){return(l-e)/m*100}function v(){const l=b(a),h=b(r);i.style.left=l+"%",c.style.left=h+"%",s&&(s.style.left=l+"%",s.style.width=h-l+"%"),u&&(u.value=a),f&&(f.value=r),i.setAttribute("aria-valuenow",a),c.setAttribute("aria-valuenow",r)}function w(){if(!p||!g)return;const l=h=>(p.textContent.replace(/[\d.,\s]/g,"").trim()||"€")+Math.round(h);p.textContent=l(a),g.textContent=l(r)}function S(){u&&(u.disabled=a<=e),f&&(f.disabled=r>=n)}v(),S();function k(l,h){let L=!1;const M=d=>{d.preventDefault(),L=!0,document.addEventListener("mousemove",x),document.addEventListener("mouseup",E),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",E)},x=d=>{if(!L)return;const y=o.getBoundingClientRect(),T=d.touches?d.touches[0].clientX:d.clientX,j=Math.max(0,Math.min(1,(T-y.left)/y.width)),P=e+j*m,A=m>=1e3?10:m>=100?5:1,C=Math.round(P/A)*A;h?a=Math.max(e,Math.min(C,r-A)):r=Math.min(n,Math.max(C,a+A)),v(),w(),S()},E=()=>{L&&(L=!1,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",E))};l.addEventListener("mousedown",M),l.addEventListener("touchstart",M,{passive:!1}),l.addEventListener("keydown",d=>{const y=m>=1e3?10:m>=100?5:1;d.key==="ArrowLeft"||d.key==="ArrowDown"?(d.preventDefault(),h?a=Math.max(e,a-y):r=Math.max(a+y,r-y),v(),w(),S()):(d.key==="ArrowRight"||d.key==="ArrowUp")&&(d.preventDefault(),h?a=Math.min(r-y,a+y):r=Math.min(n,r+y),v(),w(),S())})}k(i,!0),k(c,!1)}function B(){document.querySelectorAll("[data-product-gallery]").forEach(Q)}function Q(t){const e=t.querySelector("[data-gallery-main]"),n=Array.from(t.querySelectorAll("[data-gallery-thumb]"));if(!e)return;function a(r){const o=r.dataset.src;if(!o||e.src===o)return;e.style.opacity="0",e.style.transition="opacity 200ms ease";const s=new Image;s.onload=()=>{e.src=o,e.style.opacity="1"},s.src=o,n.forEach(i=>{i.classList.remove("border-black"),i.classList.add("border-transparent")}),r.classList.remove("border-transparent"),r.classList.add("border-black")}n.forEach(r=>{r.addEventListener("click",()=>a(r))}),t.addEventListener("keydown",r=>{const o=document.activeElement,s=n.indexOf(o);s!==-1&&(r.key==="ArrowRight"&&s<n.length-1?(r.preventDefault(),n[s+1].focus(),a(n[s+1])):r.key==="ArrowLeft"&&s>0&&(r.preventDefault(),n[s-1].focus(),a(n[s-1])))}),X(e)}function X(t){const e=t.parentElement;if(!e)return;e.style.cursor="zoom-in";let n=null;function a(){return n||(n=document.createElement("div"),n.setAttribute("role","dialog"),n.setAttribute("aria-label","Image lightbox"),n.setAttribute("aria-modal","true"),n.style.cssText="position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0.92);display:none;align-items:center;justify-content:center;padding:1.5rem;opacity:0;transition:opacity 200ms ease;",n.innerHTML='<button type="button" data-lb-close style="position:absolute;top:1rem;right:1rem;width:2.5rem;height:2.5rem;display:flex;align-items:center;justify-content:center;color:rgba(255,255,255,0.7);background:none;border:none;cursor:pointer;transition:color 150ms ease;" aria-label="Close lightbox"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path d="M16 4L4 16M4 4l12 12"/></svg></button><img data-lb-img src="" alt="" style="max-width:100%;max-height:100%;object-fit:contain;user-select:none;">',document.body.appendChild(n),n.querySelector("[data-lb-close]").addEventListener("mouseenter",i=>{i.currentTarget.style.color="#fff"}),n.querySelector("[data-lb-close]").addEventListener("mouseleave",i=>{i.currentTarget.style.color="rgba(255,255,255,0.7)"}),n.addEventListener("click",i=>{(i.target===n||i.target.closest("[data-lb-close]"))&&o()}),n)}function r(){const i=a(),c=i.querySelector("[data-lb-img]");c.src=t.src,c.alt=t.alt,i.style.display="flex",requestAnimationFrame(()=>{i.style.opacity="1"}),document.addEventListener("keydown",s),document.body.style.overflow="hidden"}function o(){n&&(n.style.opacity="0",setTimeout(()=>{n.style.display="none"},200),document.removeEventListener("keydown",s),document.body.style.overflow="")}function s(i){i.key==="Escape"&&o()}e.addEventListener("click",r)}function Y(){document.body.addEventListener("added_to_cart",t=>{const e=t.detail??{};typeof e.cart_count=="number"&&q(e.cart_count)}),window.jQuery&&window.jQuery(document.body).on("added_to_cart",(t,e,n,a)=>{z()})}function q(t){document.querySelectorAll("[data-cart-count]").forEach(e=>{t>0?(e.textContent=t>99?"99+":String(t),e.style.display=""):e.style.display="none"}),document.querySelectorAll("[data-cart-link]").forEach(e=>{e.setAttribute("aria-label",t===1?"Cart, 1 item":`Cart, ${t} items`)})}function z(){window.lenvyAjax&&(new URLSearchParams({action:"lenvy_add_to_cart",nonce:window.lenvyAjax.nonce,product_id:"0"}),fetch(window.lenvyAjax.url+"?action=woocommerce_get_refreshed_fragments",{method:"POST",credentials:"same-origin"}).then(t=>t.json()).then(t=>{if(t&&t.cart_hash!==void 0){const e=JSON.stringify(t.fragments??{}).match(/"cart_count":(\d+)/);e&&q(parseInt(e[1],10))}}).catch(()=>{}))}function G(){document.addEventListener("click",N)}function N(t){var o,s;const e=t.target.closest("[data-quick-add]");if(!e||e.disabled)return;t.preventDefault();const n=e.dataset.productId;if(!n)return;const a=e.textContent.trim();e.disabled=!0,e.textContent="…";const r=new URLSearchParams({action:"lenvy_add_to_cart",nonce:((o=window.lenvyAjax)==null?void 0:o.nonce)??"",product_id:n,quantity:"1"});fetch(((s=window.lenvyAjax)==null?void 0:s.url)??"",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(i=>i.json()).then(i=>{i.success?(q(i.data.cart_count),e.textContent="✓",setTimeout(()=>{e.textContent=a,e.disabled=!1},1400)):(e.textContent=a,e.disabled=!1)}).catch(()=>{e.textContent=a,e.disabled=!1})}function J(){document.querySelector("[data-product-grid]")&&(document.querySelectorAll("[data-filter-form]").forEach(e=>{e.addEventListener("submit",K)}),window.addEventListener("popstate",()=>{_(new URLSearchParams(window.location.search))}))}function K(t){t.preventDefault();const e=new FormData(t.currentTarget),n=new URLSearchParams;for(const[r,o]of e.entries())n.append(r,o);const a=window.location.pathname+(n.toString()?"?"+n.toString():"");history.pushState({},"",a),_(n)}function _(t){const e=document.querySelector("[data-product-grid]");if(!e||!window.lenvyAjax)return;const n=e.dataset.taxonomy??"",a=e.dataset.term??"";e.style.opacity="0.4",e.style.pointerEvents="none",e.style.transition="opacity 200ms ease";const r=new URLSearchParams(t);r.set("action","lenvy_filter_products"),r.set("nonce",window.lenvyAjax.nonce),r.set("taxonomy",n),r.set("term",a),r.set("paged",V(t)),r.set("page_url",window.location.pathname),fetch(window.lenvyAjax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(o=>o.json()).then(o=>{var m,b,v;if(!o.success){D(e);return}const{html:s,count:i,pagination:c,active:u}=o.data;e.innerHTML=s,e.style.opacity="",e.style.pointerEvents="";const f=document.querySelector(".lenvy-pagination");c?f?f.outerHTML=c:e.insertAdjacentHTML("afterend",c):f&&f.remove();const p=document.querySelector("[data-active-filters]");if(u.trim())if(p)p.outerHTML=u;else{const w=((m=document.querySelector("[data-filter-sidebar]"))==null?void 0:m.nextElementSibling)??((b=e.closest(".flex-1"))==null?void 0:b.querySelector("[data-active-filters]"));w&&w.insertAdjacentHTML("afterend",u)}else p&&p.remove();W(i,t),(v=document.querySelector("[data-filter-drawer-close]"))==null||v.click();const g=e.getBoundingClientRect().top+window.scrollY;window.scrollY>g-80&&window.scrollTo({top:g-80,behavior:"smooth"})}).catch(()=>D(e))}function D(t){t.style.opacity="",t.style.pointerEvents=""}function V(t){return t.get("paged")??"1"}function W(t,e){var c;const n=document.querySelector("[data-results-count]");if(!n)return;const a=12,r=parseInt(e.get("paged")??"1",10),o=(r-1)*a+1,s=Math.min(r*a,t),i=((c=window.lenvyAjax)==null?void 0:c.strings)??{};if(t>0){const u=i.results_showing??`Showing ${o}–${s} of ${t} products`;n.textContent=u.replace("%1$s",o).replace("%2$s",s).replace("%3$s",t)}else n.textContent=i.results_none??"No products found"}document.documentElement.style.opacity="1";document.addEventListener("DOMContentLoaded",()=>{F();const{drawer:t,closeDrawer:e}=R(),{overlay:n,closeSearch:a}=O(),{filterDrawer:r,closeFilterDrawer:o}=I();H(),U(),B(),Y(),G(),J(),document.querySelectorAll("[data-sort-select]").forEach(s=>{s.addEventListener("change",()=>{const i=new URL(window.location.href);i.searchParams.set("orderby",s.value),window.location.href=i.toString()})}),document.addEventListener("keydown",s=>{s.key==="Escape"&&(n&&!n.classList.contains("opacity-0")&&a(),t&&!t.classList.contains("-translate-x-full")&&e(),r&&!r.classList.contains("-translate-x-full")&&o())})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("input.qty").forEach(t=>{t.addEventListener("change",()=>{const e=t.closest("form.woocommerce-cart-form"),n=e==null?void 0:e.querySelector('[name="update_cart"]');n&&(n.disabled=!1)})})});
