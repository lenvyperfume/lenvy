function F(){var e;const t=document.querySelector("[data-header]");if(t){const n=()=>t.classList.toggle("shadow-sm",window.scrollY>8);window.addEventListener("scroll",n,{passive:!0}),n()}(e=document.querySelector("[data-dismiss-announcement]"))==null||e.addEventListener("click",function(){var n;(n=this.closest("[data-announcement]"))==null||n.remove()})}function R(){const t=document.querySelector("[data-drawer-toggle]"),e=document.querySelector("[data-drawer-close]"),n=document.querySelector("[data-drawer]"),a=document.querySelector("[data-drawer-backdrop]");function r(){var s;n&&(n.classList.remove("-translate-x-full"),n.setAttribute("aria-hidden","false"),a==null||a.classList.remove("opacity-0","pointer-events-none"),t==null||t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden",(s=n.querySelector("a, button"))==null||s.focus())}function o(){n&&(n.classList.add("-translate-x-full"),n.setAttribute("aria-hidden","true"),a==null||a.classList.add("opacity-0","pointer-events-none"),t==null||t.setAttribute("aria-expanded","false"),document.body.style.overflow="",t==null||t.focus())}return t==null||t.addEventListener("click",r),e==null||e.addEventListener("click",o),a==null||a.addEventListener("click",o),{drawer:n,closeDrawer:o}}function O(){const t=document.querySelector("[data-search-toggle]"),e=document.querySelector("[data-search-overlay]"),n=document.querySelector("[data-search-band]"),a=e==null?void 0:e.querySelector('input[type="search"]');function r(){e&&(e.classList.remove("opacity-0","pointer-events-none"),e.setAttribute("aria-hidden","false"),n==null||n.classList.remove("-translate-y-full"),document.body.style.overflow="hidden",setTimeout(()=>a==null?void 0:a.focus(),60))}function o(){e&&(n==null||n.classList.add("-translate-y-full"),setTimeout(()=>{e.classList.add("opacity-0","pointer-events-none"),e.setAttribute("aria-hidden","true")},150),document.body.style.overflow="",t==null||t.focus())}return t==null||t.addEventListener("click",r),e==null||e.querySelectorAll("[data-search-close]").forEach(s=>{s.addEventListener("click",o)}),{overlay:e,closeSearch:o}}function H(){document.querySelectorAll("[data-mobile-submenu-toggle]").forEach(t=>{const e=t.closest("li"),n=e==null?void 0:e.querySelector(".mobile-submenu");n&&t.addEventListener("click",()=>{var r,o;t.getAttribute("aria-expanded")==="true"?(n.style.maxHeight="0",n.style.opacity="0",n.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false"),(r=t.querySelector("svg"))==null||r.classList.remove("rotate-180")):(n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",n.setAttribute("aria-hidden","false"),t.setAttribute("aria-expanded","true"),(o=t.querySelector("svg"))==null||o.classList.add("rotate-180"))})}),document.querySelectorAll("[data-filter-accordion-toggle]").forEach(t=>{const e=t.getAttribute("aria-controls"),n=e?document.getElementById(e):null;n&&t.addEventListener("click",()=>{var r;const a=t.getAttribute("aria-expanded")==="true";t.setAttribute("aria-expanded",String(!a)),n.style.display=a?"none":"",(r=t.querySelector("svg"))==null||r.classList.toggle("rotate-180",!a)})})}function I(){const t=document.querySelector("[data-filter-drawer]"),e=document.querySelector("[data-filter-drawer-backdrop]");if(!t)return{filterDrawer:null,closeFilterDrawer:()=>{}};const n=()=>{var r;t.classList.remove("-translate-x-full"),t.setAttribute("aria-hidden","false"),e==null||e.classList.remove("opacity-0","pointer-events-none"),document.body.style.overflow="hidden",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(o=>{o.setAttribute("aria-expanded","true")}),(r=t.querySelector("button, input, select, a[href]"))==null||r.focus()},a=()=>{t.classList.add("-translate-x-full"),t.setAttribute("aria-hidden","true"),e==null||e.classList.add("opacity-0","pointer-events-none"),document.body.style.overflow="",document.querySelectorAll("[data-filter-drawer-toggle]").forEach(r=>{r.setAttribute("aria-expanded","false")})};return document.querySelectorAll("[data-filter-drawer-toggle]").forEach(r=>{r.addEventListener("click",n)}),document.querySelectorAll("[data-filter-drawer-close]").forEach(r=>{r.addEventListener("click",a)}),e==null||e.addEventListener("click",a),{filterDrawer:t,closeFilterDrawer:a}}function U(){document.querySelectorAll("[data-price-slider]").forEach(B)}function B(t){const e=parseFloat(t.dataset.min),n=parseFloat(t.dataset.max);let a=parseFloat(t.dataset.currentMin),r=parseFloat(t.dataset.currentMax);const o=t.querySelector("[data-slider-track]"),s=t.querySelector("[data-slider-range]"),c=t.querySelector('[data-slider-thumb="min"]'),m=t.querySelector('[data-slider-thumb="max"]'),y=t.querySelector('[data-slider-input="min"]'),l=t.querySelector('[data-slider-input="max"]'),h=t.querySelector('[data-slider-label="min"]'),S=t.querySelector('[data-slider-label="max"]');if(!o||!c||!m)return;const u=n-e;function L(i){return(i-e)/u*100}function w(){const i=L(a),p=L(r);c.style.left=i+"%",m.style.left=p+"%",s&&(s.style.left=i+"%",s.style.width=p-i+"%"),y&&(y.value=a),l&&(l.value=r),c.setAttribute("aria-valuenow",a),m.setAttribute("aria-valuenow",r)}function v(){if(!h||!S)return;const i=p=>(h.textContent.replace(/[\d.,\s]/g,"").trim()||"€")+Math.round(p);h.textContent=i(a),S.textContent=i(r)}function x(){y&&(y.disabled=a<=e),l&&(l.disabled=r>=n)}w(),x();function M(i,p){let g=!1;const C=d=>{d.preventDefault(),g=!0,document.addEventListener("mousemove",E),document.addEventListener("mouseup",A),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("touchend",A)},E=d=>{if(!g)return;const f=o.getBoundingClientRect(),T=d.touches?d.touches[0].clientX:d.clientX,j=Math.max(0,Math.min(1,(T-f.left)/f.width)),P=e+j*u,b=u>=1e3?10:u>=100?5:1,D=Math.round(P/b)*b;p?a=Math.max(e,Math.min(D,r-b)):r=Math.min(n,Math.max(D,a+b)),w(),v(),x()},A=()=>{g&&(g=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",A),document.removeEventListener("touchmove",E),document.removeEventListener("touchend",A))};i.addEventListener("mousedown",C),i.addEventListener("touchstart",C,{passive:!1}),i.addEventListener("keydown",d=>{const f=u>=1e3?10:u>=100?5:1;d.key==="ArrowLeft"||d.key==="ArrowDown"?(d.preventDefault(),p?a=Math.max(e,a-f):r=Math.max(a+f,r-f),w(),v(),x()):(d.key==="ArrowRight"||d.key==="ArrowUp")&&(d.preventDefault(),p?a=Math.min(r-f,a+f):r=Math.min(n,r+f),w(),v(),x())})}M(c,!0),M(m,!1)}function $(){document.querySelectorAll("[data-product-gallery]").forEach(Q)}function Q(t){const e=t.querySelector("[data-gallery-main]"),n=Array.from(t.querySelectorAll("[data-gallery-thumb]"));if(!e||!n.length)return;function a(r){const o=r.dataset.src;if(!o||e.src===o)return;e.style.opacity="0",e.style.transition="opacity 200ms ease";const s=new Image;s.onload=()=>{e.src=o,e.style.opacity="1"},s.src=o,n.forEach(c=>{c.classList.remove("border-black"),c.classList.add("border-transparent")}),r.classList.remove("border-transparent"),r.classList.add("border-black")}n.forEach(r=>{r.addEventListener("click",()=>a(r))}),t.addEventListener("keydown",r=>{const o=document.activeElement,s=n.indexOf(o);s!==-1&&(r.key==="ArrowRight"&&s<n.length-1?(r.preventDefault(),n[s+1].focus(),a(n[s+1])):r.key==="ArrowLeft"&&s>0&&(r.preventDefault(),n[s-1].focus(),a(n[s-1])))})}function X(){document.body.addEventListener("added_to_cart",t=>{const e=t.detail??{};typeof e.cart_count=="number"&&q(e.cart_count)}),window.jQuery&&window.jQuery(document.body).on("added_to_cart",(t,e,n,a)=>{Y()})}function q(t){document.querySelectorAll("[data-cart-count]").forEach(e=>{t>0?(e.textContent=t>99?"99+":String(t),e.style.display=""):e.style.display="none"}),document.querySelectorAll("[data-cart-link]").forEach(e=>{e.setAttribute("aria-label",t===1?"Cart, 1 item":`Cart, ${t} items`)})}function Y(){window.lenvyAjax&&(new URLSearchParams({action:"lenvy_add_to_cart",nonce:window.lenvyAjax.nonce,product_id:"0"}),fetch(window.lenvyAjax.url+"?action=woocommerce_get_refreshed_fragments",{method:"POST",credentials:"same-origin"}).then(t=>t.json()).then(t=>{if(t&&t.cart_hash!==void 0){const e=JSON.stringify(t.fragments??{}).match(/"cart_count":(\d+)/);e&&q(parseInt(e[1],10))}}).catch(()=>{}))}function G(){document.addEventListener("click",N)}function N(t){var o,s;const e=t.target.closest("[data-quick-add]");if(!e||e.disabled)return;t.preventDefault();const n=e.dataset.productId;if(!n)return;const a=e.textContent.trim();e.disabled=!0,e.textContent="…";const r=new URLSearchParams({action:"lenvy_add_to_cart",nonce:((o=window.lenvyAjax)==null?void 0:o.nonce)??"",product_id:n,quantity:"1"});fetch(((s=window.lenvyAjax)==null?void 0:s.url)??"",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(c=>c.json()).then(c=>{c.success?(q(c.data.cart_count),e.textContent="✓",setTimeout(()=>{e.textContent=a,e.disabled=!1},1400)):(e.textContent=a,e.disabled=!1)}).catch(()=>{e.textContent=a,e.disabled=!1})}function J(){document.querySelector("[data-product-grid]")&&(document.querySelectorAll("[data-filter-form]").forEach(e=>{e.addEventListener("submit",V)}),window.addEventListener("popstate",()=>{_(new URLSearchParams(window.location.search))}))}function V(t){t.preventDefault();const e=new FormData(t.currentTarget),n=new URLSearchParams;for(const[r,o]of e.entries())n.append(r,o);const a=window.location.pathname+(n.toString()?"?"+n.toString():"");history.pushState({},"",a),_(n)}function _(t){const e=document.querySelector("[data-product-grid]");if(!e||!window.lenvyAjax)return;const n=e.dataset.taxonomy??"",a=e.dataset.term??"";e.style.opacity="0.4",e.style.pointerEvents="none",e.style.transition="opacity 200ms ease";const r=new URLSearchParams(t);r.set("action","lenvy_filter_products"),r.set("nonce",window.lenvyAjax.nonce),r.set("taxonomy",n),r.set("term",a),r.set("paged",z(t)),fetch(window.lenvyAjax.url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()}).then(o=>o.json()).then(o=>{var u,L,w;if(!o.success){k(e);return}const{html:s,count:c,pagination:m,active:y}=o.data;e.innerHTML=s,e.style.opacity="",e.style.pointerEvents="";const l=document.querySelector(".lenvy-pagination");m?l?l.outerHTML=m:e.insertAdjacentHTML("afterend",m):l&&l.remove();const h=document.querySelector("[data-active-filters]");if(y.trim())if(h)h.outerHTML=y;else{const v=((u=document.querySelector("[data-filter-sidebar]"))==null?void 0:u.nextElementSibling)??((L=e.closest(".flex-1"))==null?void 0:L.querySelector("[data-active-filters]"));v&&v.insertAdjacentHTML("afterend",y)}else h&&h.remove();K(c,t),(w=document.querySelector("[data-filter-drawer-close]"))==null||w.click();const S=e.getBoundingClientRect().top+window.scrollY;window.scrollY>S-80&&window.scrollTo({top:S-80,behavior:"smooth"})}).catch(()=>k(e))}function k(t){t.style.opacity="",t.style.pointerEvents=""}function z(t){return t.get("paged")??"1"}function K(t,e){const n=document.querySelector("[data-results-count]");if(!n)return;const a=12,r=parseInt(e.get("paged")??"1",10),o=(r-1)*a+1,s=Math.min(r*a,t);n.textContent=t>0?`Showing ${o}–${s} of ${t} products`:"No products found"}document.documentElement.style.opacity="1";document.addEventListener("DOMContentLoaded",()=>{F();const{drawer:t,closeDrawer:e}=R(),{overlay:n,closeSearch:a}=O(),{filterDrawer:r,closeFilterDrawer:o}=I();H(),U(),$(),X(),G(),J(),document.querySelectorAll("[data-sort-select]").forEach(s=>{s.addEventListener("change",()=>{const c=new URL(window.location.href);c.searchParams.set("orderby",s.value),window.location.href=c.toString()})}),document.addEventListener("keydown",s=>{s.key==="Escape"&&(n&&!n.classList.contains("opacity-0")&&a(),t&&!t.classList.contains("-translate-x-full")&&e(),r&&!r.classList.contains("-translate-x-full")&&o())})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("input.qty").forEach(t=>{t.addEventListener("change",()=>{const e=t.closest("form.woocommerce-cart-form"),n=e==null?void 0:e.querySelector('[name="update_cart"]');n&&(n.disabled=!1)})})});
